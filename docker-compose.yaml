services:
  frontend:
    image: bobaklabs/dropper-frontend:v0.0.1
    container_name: frontend
    ports:
      - 8000:8000/tcp
    environment:
      - BACKEND_ENDPOINT="http://localhost:3000"

  backend:
    image: bobaklabs/dropper-backend:v0.0.1
    container_name: backend
    ports:
      - 3000:3000/tcp
    environment:
      - FRONTEND_ENDPOINT="http://localhost:8000"
      - GCS_SVCACCOUNT_PATH="/config/bucket-auth.json"
      - GCS_BUCKET_NAME=${GCS_BUCKET_NAME}
      - GOOGLE_COOKIE_SECRET=${GOOGLE_COOKIE_SECRET}
      - GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
      - GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
    volumes:
      - ./config/bucket-auth.json:/config/bucket-auth.json:ro

networks:
  proxy:
    external: true
